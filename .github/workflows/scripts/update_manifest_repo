if [[ $APP_NAMES == *","* ]]; then
    IFS=',' read -r -a array_app_names <<< "$APP_NAMES"
    for app_name in "${array_app_names[@]}"
    do
        cd $APP_SQUAD/$app_name/overlay/$ENVIRONMENT
        FILE_ENV=$(ls | grep ".env");cat $HOME/$app_name-envfile.env > $FILE_ENV
        kustomize edit set image app=${IMAGE_NAME}:${TAGS}
        cat kustomization.yaml
        git config --local user.email $GITHUB_EMAIL
        git config --local user.name $GITHUB_USER
        git commit -m "update $app_name image to ${IMAGE_NAME}:${TAGS}" -a || echo "Nothing to commit, $app_name version ${TAGS} is already deployed to $ENVIRONMENT" >> $GITHUB_STEP_SUMMARY
        git push ${REMOTE_REPO} HEAD:main --force 
        cd ../../../../
    done 
else
        cd $APP_SQUAD/${APP_NAMES}/overlay/$ENVIRONMENT
        FILE_ENV=$(ls | grep ".env");cat $HOME/envfile.env > $FILE_ENV
        kustomize edit set image app=${IMAGE_NAME}:${TAGS}
        cat kustomization.yaml
        git config --local user.email $GITHUB_EMAIL
        git config --local user.name $GITHUB_USER
        git commit -m "update image to ${IMAGE_NAME}:${TAGS}" -a || echo "Nothing to commit, version ${TAGS} is already deployed to $ENVIRONMENT" >> $GITHUB_STEP_SUMMARY
        git push ${REMOTE_REPO} HEAD:main --force 
fi